// Test that macros work with complex expressions

macro ADD_TO_VAR(varname, value) {
    varname = varname + value;
}

macro DOUBLE(x) {
    x = x * 2;
}

code test:
    proc test_macros() -> int {
        var result: int = 10;
        var counter: int = 5;
        
        // Call macro - should expand inline
        ADD_TO_VAR(result, 15);
        
        // Another macro call
        DOUBLE(counter);
        
        // result should be 25, counter should be 10
        // return 25 + 10 = 35
        return result + counter;
    }
    
    proc main() -> int {
        var x: int;
        x = test_macros();
        return x;
    }
